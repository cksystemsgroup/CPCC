<html t:type="layout" title="${message:virtualVehicleOverview}"
	xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd"
	xmlns:p="tapestry:parameter">

<!-- <div class="row"> -->
<!-- 	<div class="col-md-12"> -->
<t:PageLink t:page="commons/vehicle/new" class="btn btn-primary">${message:createNewVehicle}</t:PageLink>
<!-- 	</div> -->
<!-- </div> -->

<!-- <div class="row"> -->
<!-- 	<div class="col-md-12"> -->
<h4>${message:virtualVehicleList}</h4>

<t:Zone t:id="zone" t:mixins='ZoneRefresh' ZoneRefresh.period='5'>
	<!-- ZoneRefresh.context="'show'" -->
	<t:Form t:id="virtualVehicleForm">
		<t:Grid t:source="virtualVehicleList"
			t:exclude="code,continuation,apiVersion"
			t:reorder="id,name,state,uuid,startTime,endTime,migrationStartTime,migrationDestination"
			t:row="virtualVehicle" t:add="migrationDestination,vehicleActions"
			class="table table-striped table-condensed topic-table">

			<p:startTimeCell>
				<t:output t:format="${message:dateFormat}"
					t:value="virtualVehicle.startTime" />
			</p:startTimeCell>

			<p:endTimeCell>
				<t:output t:format="${message:dateFormat}"
					t:value="virtualVehicle.endTime" />
			</p:endTimeCell>

			<p:migrationStartTimeCell>
				<t:output t:format="${message:dateFormat}"
					t:value="virtualVehicle.migrationStartTime" />
			</p:migrationStartTimeCell>

			<p:migrationDestinationCell>
				<t:if test="virtualVehicle.migrationDestination">
							${virtualVehicle.migrationDestination.name}
						</t:if>
			</p:migrationDestinationCell>

			<p:vehicleActionsCell>
				<ul class="list-inline">
					<t:if test="isRestartMigration()">
						<li><t:EventLink t:event="restartMigration"
								t:context="virtualVehicle.id"
								t:title="${message:restartMigration}">
								<span class="glyphicon glyphicon-share-alt" />
							</t:EventLink></li>
					</t:if>

					<t:if test="isEdit()">
						<li><t:PageLink t:page="commons/vehicle/edit"
								t:context="virtualVehicle.id" t:title="${message:editVehicle}">
								<span class="glyphicon glyphicon-pencil" />
							</t:PageLink></li>
					</t:if>

					<t:if test="isStart()">
						<li><t:EventLink t:event="startVehicle"
								t:context="virtualVehicle.id" title="${message:startVehicle}">
								<span class="glyphicon glyphicon-play" />
							</t:EventLink></li>
					</t:if>

					<t:if test="isRestart()">
						<li><t:EventLink t:event="restartVehicle"
								t:context="virtualVehicle.id" title="${message:restartVehicle}">
								<span class="glyphicon glyphicon-repeat" />
							</t:EventLink></li>
					</t:if>

					<t:if test="isPause()">
						<li><t:EventLink t:event="pauseVehicle"
								t:context="virtualVehicle.id" title="${message:pauseVehicle}">
								<span class="glyphicon glyphicon-pause" />
							</t:EventLink></li>
					</t:if>

					<t:if test="isStop()">
						<li><t:EventLink t:event="stopVehicle"
								t:context="virtualVehicle.id" title="${message:stopVehicle}">
								<span class="glyphicon glyphicon-stop" />
							</t:EventLink></li>
					</t:if>

					<t:if test="isDelete()">
						<li><t:EventLink t:event="deleteVehicle"
								t:context="virtualVehicle.id" title="${message:deleteVehicle}">
								<span class="glyphicon glyphicon-remove" />
							</t:EventLink></li>
					</t:if>

					<li><t:PageLink t:page="commons/vehicle/storage"
							t:context="virtualVehicle.id"
							t:title="${message:showVehicleStorage}">
							<span class="glyphicon glyphicon-folder-close" />
						</t:PageLink></li>
				</ul>
			</p:vehicleActionsCell>

			<p:empty>
				<p>${message:noVirtualVehicleFound}</p>
			</p:empty>
		</t:Grid>
	</t:Form>
</t:Zone>
<!-- 	</div> -->
<!-- </div> -->

</html>
